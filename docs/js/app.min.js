/*! weather-service v1.0.0 | (c) 2021 bnjmnrsh@gmail.com | MIT License | git+ssh://git@github.com/bnjmnrsh-projs/Weather-Service.git */
!function(){"use strict";const e=function(e=""){if("number"==typeof e)return e;if(!e)return;const t=document.createElement("div");return t.innerHTML=e,t.innerText},t=async function(e,t,n=!1){try{return e?new Promise(((o,r)=>{window.fetch(e,t).then((e=>async function(e,t=!1){return t&&console.log("fParseJSONresponse",e),new Promise((t=>{e.json().then((n=>t({status:e.status,ok:e.ok,json:n}))).catch((e=>{t({ok:!1,status:"Request()::fParseJSONresponse()",status_message:e})}))}))}(e,n))).then((e=>e.ok?(n&&(console.log("fRequest","ok"),console.log("fRequest response",e.json)),o(e)):(n&&(console.error("fRequest not ok"),console.error("oResponse",e)),Object.prototype.hasOwnProperty.call(e,"json.error")?o({status:e.status,status_message:e.json.error}):o(e)))).catch((e=>{throw n&&(console.error("fRequest catch",{...e}),console.warn("oError",e)),0===Object.keys(e).length&&o({ok:!1,status:"Request() fetch error",status_message:e}),new Error(e)}))})):{ok:!1,status:"Request() fetch error",status_message:`Invalid fetch URL: ${e}`}}catch(e){throw n&&console.warn("Request() error",e),new Error({...e})}},n=async function(e,o={},r=1,a=!1){try{return await t(e,o,a)}catch(t){if(a&&console.error("fRequestWithRetry() error",t),t.status)throw t;if(r<=1)throw t;return a&&console.warn(`Request::fRequestWithRetry(): Retrying fetch request: ${r}`),await n(e,o,r-1,a)}},o=async function(e,t){if(navigator.geolocation)try{return t.debug&&console.log("fGetLocation: Checking geoLoccation API: fGeoLocApi."),await async function(){const e={enableHighAccuracy:!1,timeout:5e3,maximumAge:0},t=new Promise((function(t,n){navigator.geolocation.getCurrentPosition((function(e){t(e.coords)}),(function(e){n(e)}),e)}));return await t}()}catch(o){t.debug&&(console.warn(`fGetLocation: failed using fGeoLocApi: ${o}`),console.warn("Falling back to IP address lookup instead."));try{return await async function(e,t){return await n(e,{},t.api_retries).then((function(e){if(e.ok)return e.json;throw e}))}(e,t)}catch(e){throw t.debug&&console.warn(`fGetLocation: failed sIpapiLocationApi: ${e}`),new Error({...e})}}},r=async function(t,o,r){const a=await n(function(t,n,o){if(!n)return;let r=`${t}&lat=${n.latitude}&lon=${n.longitude}`;if(!n.latitude||!n.longitude){let e,o,a="";"city"in n&&n.city&&(e=`&city=${n.city}`),"state"in n&&n.state&&(o=`&state=${n.state}`),"country"in n&&n.country_code&&(a=`&country=${n.country_code}`),r=`${t}${e??""}${o??""}${a??""}`}return o.debug&&console.log("sApiQuery query:",e(r)),e(r)}(o,t,r),{},r.api_retries).then((function(e){if(e.ok)return e.json;throw e}));return await a},a=function(e){if("number"!=typeof e)return 0;let t="none";switch(e=parseFloat(e)){case e<=0?e:null:t=0;break;case e>=0&&e<10?e:null:t=1;break;case e>=10&&e<22?e:null:t=2;break;case e>=22&&e<27?e:null:t=3;break;case e>=27&&e<34?e:null:t=4;break;case e>=34?e:null:t=5}return t},s=function(e){if(!e)return;let t="none";switch(e=parseFloat(e)){case e<1?e:null:t="0";break;case e>=1&&e<3?e:null:t="1";break;case e>=3&&e<5?e:null:t="2";break;case e>=5&&e<7?e:null:t="3";break;case e>=7&&e<9?e:null:t="4";break;case e>=9||e<=10?e:null:t=5}return t},i={200:["wi-day-thunderstorm","wi-night-alt-thunderstorm"],201:["wi-day-thunderstorm","wi-night-alt-thunderstorm"],202:["wi-day-thunderstorm","wi-night-alt-thunderstorm"],230:["wi-day-thunderstorm","wi-night-alt-thunderstorm"],231:["wi-day-thunderstorm","wi-night-alt-thunderstorm"],232:["wi-day-thunderstorm","wi-night-alt-thunderstorm"],233:["wi-day-thunderstorm","wi-night-alt-thunderstorm"],300:["wi-day-rain","wi-night-alt-rain"],301:["wi-day-rain","wi-night-alt-rain"],302:["wi-day-rain","wi-night-alt-rain"],500:["wi-day-rain","wi-night-alt-rain"],501:["wi-day-rain","wi-night-alt-rain"],502:["wi-day-rain-wind","wi-night-alt-rain-wind"],511:["wi-day-sleet","wi-night-alt-sleet"],520:["wi-day-showers","wi-night-alt-showers"],521:["wi-day-showers","wi-night-alt-showers"],522:["wi-day-rain","wi-night-alt-rain"],600:["wi-day-snow","wi-night-alt-snow"],602:["wi-day-snow","wi-night-alt-snow"],610:["wi-day-snow-thunderstorm","wi-night-alt-snow-thunderstorm"],611:["wi-day-snow-wind","wi-night-alt-snow-wind"],612:["wi-day-snow-wind","wi-night-alt-snow-wind"],622:["wi-day-snow-thunderstorm","wi-night-alt-snow-thunderstorm"],623:["wi-day-snow","wi-night-alt-snow"],700:["wi-day-fog","wi-night-fog"],711:["wi-day-fog","wi-night-fog"],721:["wi-day-fog","wi-night-fog"],731:["wi-day-fog","wi-night-fog"],741:["wi-day-fog","wi-night-fog"],751:["wi-day-fog","wi-night-fog"],800:["wi-day-sunny","wi-night-clear"],801:["wi-day-cloudy","wi-night-alt-cloudy"],802:["wi-day-cloudy-high","wi-night-alt-cloudy-high"],803:["wi-day-cloudy-high","wi-night-partly-cloudy"],804:["wi-cloudy","wi-cloudy"],900:["wi-rain-mix","wi-rain-mix"]},c={0:["wi-day-sunny","wi-night-clear"],1:["wi-day-cloudy-high","wi-night-alt-cloudy-high"],2:["wi-day-sunny-overcast","wi-night-partly-cloudy"],3:["wi-cloud","wi-cloud"],4:["wi-cloudy","wi-cloudy"],5:["dark-cloudy","dark-cloudy"]},l=function(t,n){if(!t)return;let o,r;return!n&&Object.prototype.hasOwnProperty.call(t,"pod")?(r="d"===e(t.sPod)?0:1,o=parseInt(e(t.weather.code))):"hour"in t?(r="d"===e(t[n].sPod)?0:1,o=parseInt(e(t[n].weather.code))):(r=1,o=parseInt(e(t.weather.code))),i[o][r]},d=function(e,t={}){if("content"in document.createElement("template")){const n=document.createElement("div");n.innerHTML=e.trim();const o=n.querySelector("div >:first-child");return Object.prototype.hasOwnProperty.call(t,"style")&&o.setAttribute("style",t.style),Object.prototype.hasOwnProperty.call(t,"class")&&o.classList.add(t.class),Object.prototype.hasOwnProperty.call(t,"data")&&Object.keys(t.data).length>0&&Object.keys(t.data).map((e=>o.setAttribute(`data-${e}`,t.data[e]))),n.innerHTML}return""},u=function(e,t){return"number"!=typeof e&&t.debug&&console.warn(`fPercip recieved a non numeric value: ${e} typeof: ${typeof e}`),0===e?e:"M"===t.units?`${parseFloat(e).toFixed(2)}&nbsp;mm/hr`:`${(.0393701*parseFloat(e)).toFixed(2)}&nbsp;inch/hr`},g=function(e,t,n=!0){if("number"!=typeof e&&t.debug&&console.warn(`fTemp recieved a non numeric value: ${e} typeof: ${typeof e}`),"number"!=typeof e)return 0;if("M"===t.units){const t=parseFloat(e).toFixed(1);return n?`${t}°&nbsp;C`:t}{const t=(9*parseFloat(e)/5+32).toFixed(1);return n?`${t}°&nbsp;F`:t}},h=function(e){if(e.length>=16)return e.replace(" ","T");const t=`${e}T00:00`;if("function"!=typeof new Date(t).getMonth)throw new Error(`fAddTimeToDateString not provided a string that can be converted to a valid date: "${e}:`);return t},w=function(e="",t,n=""){let o,r;t.debug&&console.log("fGetLocalTime: sDate",e),o=""!==e?new Date(h(e)):new Date,r=""!==n?n.split(":"):[o.getUTCHours(),o.getUTCMinutes()];const a=[o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),r[0],r[1]],s=new Date(Date.UTC(...a));return t.debug&&(console.log("fGetLocalTime provided sTime24: ",n),console.log("fGetLocalTime UTC converted time:",`${s.getHours()}:${s.getMinutes()}`),console.log("fGetLocalTime: oDate",o)),function(e,t){if(!e.includes(":")||"5"===!e.length)throw new Error("fTime not given a valid time string: HH:MM");if("M"===t.units)return e;t.debug&&(console.log("fTime: sTime24",`${e}`),console.log("fTime: sTime24 length",`${e.length}`));const[n,o]=e.match(/([0-9]{1,2}):([0-9]{2})/).slice(1);return`${+n%12||12}:${o}&nbsp;${+n<12?"AM":"PM"}`}(`${s.getHours()}`.padStart(2,"0")+":"+`${s.getMinutes()}`.padStart(2,"0"),t)},p={en:{now:"Currently: ",aira_now:"The weather is currently: ",feels_like:"Feels Like:",uv:"UV:",cloud:"Cloud:",snow:"Snow:",percip:"Rain:",wind:"Wind:",aira_winds:"Winds traveling at",aira_winds_join:"from the",vis:"Visibility:",sun:"Sun:",moon:"Moon:"}},f=function(t,n,o,r=p){const a=n.CURRENT.data[0];return t?t.replace("{{feels_like}}",r.en.feels_like).replace("{{app_temp}}",g(e(a.app_temp),o)).replace("{{uv}}",r.en.uv).replace("{{uv_index}}",e(a.uv.toFixed(2))).replace("{{cloud}}",r.en.cloud).replace("{{cloud_percent}}",`${e(a.clouds)}%`).replace("{{snow}}",r.en.snow).replace("{{snow_percip}}",u(e(a.snow),o)).replace("{{rain}}",r.en.percip).replace("{{rain_percip}}",u(e(a.precip),o)).replace("{{aira_winds}}",r.en.aira_winds).replace("{{aira_winds_join}}",r.en.aira_winds_join).replace("{{wind}}",r.en.wind).replace("{{wind_speed}}",function(e,t){return"number"!=typeof e&&t.debug&&console.warn(`fKmPerHour recieved a non numeric value: ${e} typeof: ${typeof e}`),"number"!=typeof e?0:"M"===t.units?`${(3.6000059687997*parseFloat(e)).toFixed(2)}&nbsp;km/hr`:`${(2.23694*parseFloat(e)).toFixed(2)}&nbsp;mi/hr`}(e(a.wind_spd),o)).replace("{{wind_direction}}",e(a.wind_cdir)).replace("{{vis}}",r.en.vis).replace("{{vis_distance}}",function(e,t){return"number"!=typeof e&&t.debug&&console.warn(`fKm recieved a non numeric value: ${e} typeof: ${typeof e}`),"number"!=typeof e?0:"M"===t.units?`${parseFloat(e).toFixed(2)}&nbsp;km`:`${(.621371*parseFloat(e)).toFixed(2)}&nbsp;miles`}(e(a.vis),o)).replace("{{sun_rise_set}}",r.en.sun).replace("{{sun_rise}}",w(e(a.ob_time),o,e(a.sunrise))).replace("{{sun_set}}",w(e(a.ob_time),o,e(a.sunset))).replace("{{moon}}",r.en.moon):""},m=function(t,n){n.debug&&console.log("fRenderHUD: ",t);const o=`<header id="hud" class="c-hud error">\n            <h3>\n              <img class="weather-icon icon-spin" alt="" src="./svg/icons/weather/svg/wi-wind-deg.svg" />\n              Whoops!\n            </h3>\n            <ul class="unstyled">\n              <li class="">There was an error loading the current weather:\n                ${t.CURRENT.error?`<code>${t.CURRENT.error}</code>`:""}\n                ${t.CURRENT.status?`<code>${t.CURRENT.status}</code>`:""}\n              </li>\n              <li class=""><button class="rounded">${n.icon.sRefresh} reload</button></li>\n            </ul>\n        </header>\n        `;if(t.CURRENT.error||t.CURRENT.status)return o;const r=t.CURRENT.data[0],s=l(r);return function(t,n,o,r=p){const a=n.CURRENT.data[0];return t?t.replace("{{now}}",r.en.now).replace("{{aira_weather_description}}",`${r.en.aira_now} ${e(a.weather.description)}`).replace("{{weather_description}}",e(a.weather.description).toLowerCase()).replace("{{temp}}",g(e(a.temp),o)).replace("{{city}}",e(a.city_name)).replace("{{country}}",e(a.country_code)):""}(`<header\n        id="hud" class="c-hud" data-temp="${a(e(r.temp))}">\n          <h3>\n            <img class="weather-icon" alt="" src="./svg/icons/weather/svg/${s}.svg" />\n            <span aria-hidden="true">{{temp}}</span>\n          </h3>\n          <ul class="unstyled">\n            <li aria-hidden="true">{{now}} {{weather_description}}</li>\n            <li hidden>{{aira_weather_description}}</li>\n            <li>{{city}}, {{country}}</li>\n          </ul>\n        </header>\n        `,t,n)},y=function(t,n){n.debug&&(console.log("fRenderForcast: ",t),console.log("_oSettings: ",n));return Object.keys(t).map((function(o){return`<li data-temp="${a(e(t[o].temp))}">\n                        <header datetime="${e(t[o].datetime)}" aria-description="The forecast for">${function(e){const t=new Date(h(e));if(!t||"function"!=typeof t.getMonth)throw new Error("fGetWeekday provided invalid date");return t.toLocaleString("default",{weekday:"short"})}(e(t[o].datetime))} ${function(e){const t=new Date(h(e));if(!t||"function"!=typeof t.getMonth)throw new Error("fFormatDayOrdinal provided invalid date");return t.getDate()+(t.getDate()%10==1&&11!==t.getDate()?"st":t.getDate()%10==2&&12!==t.getDate()?"nd":t.getDate()%10==3&&13!==t.getDate()?"rd":"th")}(e(t[o].datetime))}</header>\n                        <img class="weather-icon" alt="${e(t[o].weather.description)}" src="./svg/icons/weather/svg/${l(t[o])}.svg" />\n                        <p class="forecast-description" aria-hidden="true">${e(t[o].weather.description.toLowerCase())}</p>\n                         <span><stong>${g(e(t[o].high_temp),n)}</stong></span>\n                          <span>${g(e(t[o].low_temp),n)}</span>\n\n                    </li>`})).join("")},b=function(t,n,o){const r=function(e,t="d"){if("number"!=typeof e)return;t="d"===t?0:1;const n=c;let o="";switch(e=parseInt(e)){case e>=0&&e<16?e:null:o=[n[0][t],0];break;case e>=16&&e<32?e:null:o=[n[1][t],1];break;case e>=32&&e<48?e:null:o=[n[2][t],2];break;case e>=48&&e<65?e:null:o=[n[3][t],3];break;case e>=65&&e<83?e:null:o=[n[4][t],4];break;case e>=83&&e<=100?e:null:o=[n[5][t],5]}return o.push(document.querySelector(`#svgs .svg-${o[0]}`).outerHTML),o}(t.clouds),i=function(e,t){const n={phases:["new","waxing-crescent","first-quarter","waxing-gibbous","full","waning-gibbous","third-quarter","waning-crescent"],phase:function(e,t,o){let r=0,a=0,s=0,i=0;return t<3&&(e--,t+=12),r=365.25*e,a=30.6*++t,s=r+a+o-694039.09,s/=29.5305882,i=parseInt(s),s-=i,i=Math.round(s*this.phases.length),i>=8&&(i=0),{phase:i,name:n.phases[i]}}};(e=(e=e||new Date)instanceof String?new Date(e):e)&&"function"==typeof e.getMonth||t.debug&&console.error(`fMoonPhase provided invalid date strings: year: ${e.year}, month: ${e.month}, day: ${e.day}`);const o=e.getFullYear(),r=e.getMonth()+1,a=e.getDate(),s=n.phase(o,r,a);return t.debug&&console.log("fMoonPhase result: ",s),s}(t.obj_time,o),l=o.icon,u=`\n        <div id="details" class="c-details">\n            <ul class="unstyled">\n                <li class="c-feels-like">\n                    <span class="left-col">{{feels_like}} {{app_temp}}</span>\n                    ${d(l.sThermometer,{class:"inline-icon",data:{temp:a(e(t.app_temp))}})}\n                </li>\n                ${t.uv?`<li class="c-uv-index">\n                            <span class="left-col">{{uv}} {{uv_index}}</span>\n                            ${d(l.sSunnyDay,{class:"inline-icon",data:{uv:s(e(t.uv))}})}\n                          </li>`:""}\n                <li class="c-cloud-cover">\n                    <span class="left-col">{{cloud}} {{cloud_percent}}</span>\n                    ${r[2]}\n                </li>\n                ${t.snow?`<li>\n                            <span class="left-col">{{snow}} {{snow_percip}}</span>\n                            ${l.sSnow}\n                          </li>`:""}\n                <li class="c-precipitation">\n                    <span class="left-col">{{rain}} {{rain_percip}}</span>\n                    ${l.sRaindrop}\n                </li>\n                <li class="c-windspeed" aria-description="{{aira_winds}} ">\n                    <span class="left-col">\n                        {{wind}} {{wind_speed}}<span aira-hidden>&nbsp;|&nbsp;</span><span hidden>{{aira_winds_join}}</span>{{wind_direction}}\n                    </span>\n                    <span class="inline-icon">\n                        ${d(l.sWindDirection,{style:`transform: rotate(${e(t.wind_dir+180)}deg)`})}\n                        ${l.sStrongWind}\n                    </span>\n                </li>\n                <li class="c-visibility">\n                    <div class="visibility-wrap">\n                        <span class="left-col">{{vis}} {{vis_distance}}</span>\n                        ${l.sBinoculars}\n                    </div>\n                    <div class="scale" aria-hidden="true"><div class="distance"></div></div>\n                </li>\n                <li class="c-sun-rise-set">\n                    <span class="left-col">{{sun_rise_set}} {{sun_rise}} | {{sun_set}}</span>\n                    ${l.sSunrise}\n                </li>\n                <li class="c-moonphase">\n                    <span class="left-col">{{moon}} ${i.name}</span>\n                    <img class="inline-icon moon"\n                        alt=""\n                        height="25" width="25"\n                        src="./svg/icons/moon/svg/${i.phase}.svg"/>\n                </li>\n            </ul>\n        </div>`;return f(u,n,o)},v=function(e={}){let t=window.localStorage.getItem(e.STORAGE_KEY);return e.debug&&console.log("ThemeToggle:fGetLocalStoreColorSchemeVal: sCurrentSetting:",t),null===t&&(t="dark"===function(e={}){let t=window.getComputedStyle(document.documentElement).getPropertyValue(e.COLOR_MODE_CSS_PROP);return t.length&&(t=t.replace(/"/g,"").trim()),e.debug&&console.log("ThemeToggle:fGetColorModeCSSpropVal: sResponse:",t),t}(e)?"dark":"light",window.localStorage.setItem(e.STORAGE_KEY,t)),t},$=function(e,t={}){t.debug&&console.log("ThemeToggle:fSetLocalStoreColorSchemeVal: to sCurrentSetting:",e),"light"!==e&&"dark"!==e||window.localStorage.setItem(t.STORAGE_KEY,e)},T=function(e,t={}){const n=e||v(t);"light"!==n&&"dark"!==n||document.documentElement.setAttribute("data-user-color-scheme",n),t.debug&&console.log("ThemeToggle:fSetHTMLdataAttr: sColorSetting:",e)},_=function(e,t,n={}){switch(e){case"dark":t.setAttribute("aria-pressed","true");break;case"light":t.removeAttribute("aria-pressed")}n.debug&&console.log("ThemeToggle:fSetButtonState: sSetButtonState:",e)},R=function(e,t,n){const o=e||v(n);switch(n.debug&&console.log("ThemeToggle:fSetGlobalColorScheme: sCurrentSetting:",o),o){case"light":T("light",n),_("light",t,n),$("light",n);break;case"dark":T("dark",n),_("dark",t,n),$("dark",n)}},S=function(e,t={}){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(n){n.matches?R("dark",e,t):R("light",e,t),t.debug&&n.matches&&console.log(`ThemeToggle:fAddEventListeners: Window detected system color pref change: ${n.matches}`)})),document.addEventListener("click",(function(n){n.target.id===e.id&&(t.debug&&console.log(`ThemeToggle:fAddEventListeners: button "${n.target.id}" clicked.`),function(e,t={}){const n=v(t);switch(t.debug&&console.log("ThemeToggle:fToggleGlobalColorScheme: sCurrentSetting:",n),n){case"light":R("dark",e,t);break;case"dark":R("light",e,t)}}(e,t))}));new window.MutationObserver((function(n){n.forEach((function(n){if(n.attributeName===`data-${t.STORAGE_KEY}`){const n=document.documentElement.getAttribute(`data-${t.STORAGE_KEY}`);_(n,e,t),$(n,t),t.debug&&console.log(`ThemeToggle:fAddEventListeners: MutationObserver change: data-${t.STORAGE_KEY}="${n}"`)}}))})).observe(document.documentElement,{attributeFilter:[`data-${t.STORAGE_KEY}`],attributeOldValue:!0})},k=function(e={}){const t=Object.assign({},{buttonID:"#theme-toggler",debug:!1},e);t.STORAGE_KEY="user-color-scheme",t.COLOR_MODE_CSS_PROP="--color-mode",this.oSettings=t;const n=document.querySelector(t.buttonID);this.init=function(){n?(n.removeAttribute("disabled"),R(v(t),n,t),S(n,t),t.debug&&console.log("ThemeToggle:Init, current localStore setting: ",window.localStorage.getItem(t.STORAGE_KEY))):console.warn("ThemeToggle: Couldn't find the theme toggel button with selector:",n)}};!function(e={}){document.documentElement.classList.remove("no-js");const t={target:"#app",units:"M",debug:!1,devFlags:!1,loc:{longitude:"",latitude:""},api_retries:3,locApi:"https://ipapi.co/json/",weatherApi:"https://weatherserv.bnjmnrsh.workers.dev/?",fBuildBaseWeatherApiQuery(){return this.devFlags?`${this.weatherApi}&DEV=${this.devFlags}`:`${this.weatherApi}`}};e=Object.assign(t,e);const{searchParams:n}=new URL(document.URL);e.debug=n.has("DEBUG"),n.has("DEV")&&(e.dev=n.get("DEV")),n.has("lat")&&n.has("lon")&&(e.loc={longitude:n.has("lat"),latitude:n.has("lon")}),e.icon=function(e="#svgs",t="svg"){const n=document.querySelector(e).querySelectorAll(t),o={};return n.forEach((function(e){o[e.id]=e.outerHTML})),o}();const a=function(t){const n=document.querySelector(e.target);n.querySelector("#hud").outerHTML=m(t,e),t.CURRENT.error||t.CURRENT.status?(n.querySelector("#details").classList.remove("loading"),n.querySelector("#details").classList.add("error")):n.querySelector("#details").outerHTML=b(t.CURRENT.data[0],t,e),n.querySelector("#forecast").outerHTML=function(e,t){t.debug&&console.log("fRenderForecast: ",e);const n=e?"":"error",o=`<li class="error">\n                            <p>There was an error loading the forecast: ${e.error?`<code>${e.error}</code>`:""}\n                            ${e.status?`<code>${e.status}</code>`:""}</p>\n                            <button class="rounded">${t.icon.sRefresh} reload</button>\n                          </li>`;return`\n        <div id="forecast" class="c-forecast ${n}" aria-description="The weather forecast for the next 16 days.">\n            <ul class="unstyled">\n                ${e.data?y(e.data,t):o}\n            </ul>\n        </div>\n        `}(t.DAILY,e),t.CURRENT.error||t.CURRENT.status||function(e){const t=parseFloat(e)/5*100;document.querySelector(".distance").style.setProperty("--distance",100-t+"%")}(t.CURRENT.data[0].vis),n.classList.remove("loading")};!async function(){try{e.loc||(e.loc=await o(e.locApi,e));const t=await o(e.locApi,e),n=await r(t,e.fBuildBaseWeatherApiQuery(),e);e.debug&&(console.log("fGetLocation response:",t),console.log("fGetWeather response:",n)),n&&a(n)}catch(t){console.error("init error: ",t),function(e,t){document.querySelector(t.target).innerHTML=`<div id="ohnos" class="c-screen errors">\n                <h3><span aria-hidden="true">⥀.⥀</span><br>Oh Nooos!</h3>\n                <p class="sr-only">There has been a crittical error:</p>\n                    <div class="errors-wrap">\n                        ${e.stack?"<code>"+e.stack+"</code>":""}\n                        ${e.status?`<code>${e.status}: ${e.statusText??e.status_message}</code>`:""}\n                    </div>\n                <img alt="" class="screen-icon errors-icon" src="./svg/icons/weather/svg/wi-alien.svg"/>\n            </div>`}(t,e)}}();new k({debug:e.debug}).init()}({units:"I",debug:!1,devFlags:!1})}();
//# sourceMappingURL=app.min.js.map
